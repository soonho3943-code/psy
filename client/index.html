<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>함께런런</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container" id="loginPage">
    <div class="login-box">
      <h1>함께런런</h1>
      <form id="loginForm">
        <div class="form-group">
          <label for="username">아이디 (이름)</label>
          <input type="text" id="username" name="username" placeholder="예: 홍길동" required>
        </div>
        <div class="form-group">
          <label for="password">비밀번호</label>
          <input type="password" id="password" name="password" required>
        </div>
        <button type="submit" class="btn btn-primary">로그인</button>
        <div style="display: flex; gap: 10px; margin-top: 10px;">
          <button type="button" class="btn btn-signup-student" onclick="showSignupModal()" style="flex: 1;">학생<br>회원가입</button>
          <button type="button" class="btn btn-signup-teacher" onclick="showTeacherSignupModal()" style="flex: 1;">교사<br>회원가입</button>
          <button type="button" class="btn btn-signup-parent" onclick="showParentSignupModal()" style="flex: 1;">학부모<br>회원가입</button>
        </div>
      </form>
      <p class="hint">계정이 없으신가요? 위의 회원가입 버튼을 클릭하세요!</p>
      <div class="test-accounts">
        <h3>테스트 계정</h3>
        <ul>
          <li>관리자: admin / 1234</li>
          <li>교사: teacher1 / 1234</li>
          <li>학생: 김민준 (또는 이서연, 박지호 등) / 1234</li>
          <li>학부모: parent1 / 1234</li>
        </ul>
      </div>
    </div>
  </div>

  <div class="container hidden" id="dashboardPage">
    <header>
      <h1>함께런런</h1>
      <div class="user-info">
        <span id="userInfo"></span>
        <button class="btn btn-secondary" onclick="logout()">로그아웃</button>
      </div>
    </header>

    <nav class="tabs">
      <button class="tab-btn active" data-tab="dashboard">대시보드</button>
      <button class="tab-btn" data-tab="records">운동 기록</button>
      <button class="tab-btn" data-tab="physical">신체 기록</button>
      <button class="tab-btn" data-tab="badges">획득 뱃지</button>
      <button class="tab-btn" data-tab="board">런런톡</button>
      <button class="tab-btn" data-tab="students" id="studentsTab">학생 관리</button>
    </nav>

    <main>
      <!-- 대시보드 탭 -->
      <section id="dashboard" class="tab-content active">
        <h2>운동 현황</h2>
        <div class="student-selector" id="studentSelector" style="display: none;">
          <label for="selectedStudent">학생 선택:</label>
          <select id="selectedStudent" onchange="loadDashboard()">
            <option value="">학생을 선택하세요</option>
          </select>
        </div>

        <div class="stats-grid">
          <div class="stat-card">
            <h3>오늘 걸음 수</h3>
            <p class="stat-value" id="todaySteps">-</p>
          </div>
          <div class="stat-card">
            <h3>운동 시간</h3>
            <p class="stat-value" id="todayMinutes">-</p>
          </div>
          <div class="stat-card">
            <h3>칼로리</h3>
            <p class="stat-value" id="todayCalories">-</p>
          </div>
          <div class="stat-card">
            <h3>거리</h3>
            <p class="stat-value" id="todayDistance">-</p>
          </div>
        </div>

        <h3>주간 통계</h3>
        <div class="stats-grid">
          <div class="stat-card">
            <h3>평균 걸음 수</h3>
            <p class="stat-value" id="avgSteps">-</p>
          </div>
          <div class="stat-card">
            <h3>평균 운동 시간</h3>
            <p class="stat-value" id="avgMinutes">-</p>
          </div>
          <div class="stat-card">
            <h3>총 운동 일수</h3>
            <p class="stat-value" id="totalDays">-</p>
          </div>
          <div class="stat-card">
            <h3>총 칼로리</h3>
            <p class="stat-value" id="totalCalories">-</p>
          </div>
        </div>

        <h3>주간 추이</h3>
        <div class="charts-grid">
          <div class="chart-container" style="position: relative;">
            <h4>걸음 수 추이</h4>
            <canvas id="stepsChart" width="600" height="300"></canvas>
            <div id="stepsChartTooltip" class="chart-tooltip" style="display: none;"></div>
            <div class="chart-legend">
              <span class="legend-item"><span class="legend-color" style="background: #4CAF50;"></span> 내 기록</span>
              <span class="legend-item"><span class="legend-color" style="background: #FF9800;"></span> 학급 평균</span>
            </div>
          </div>
          <div class="chart-container" style="position: relative;">
            <h4>운동 시간 추이 (분)</h4>
            <canvas id="minutesChart" width="600" height="300"></canvas>
            <div id="minutesChartTooltip" class="chart-tooltip" style="display: none;"></div>
            <div class="chart-legend">
              <span class="legend-item"><span class="legend-color" style="background: #2196F3;"></span> 내 기록</span>
              <span class="legend-item"><span class="legend-color" style="background: #E91E63;"></span> 학급 평균</span>
            </div>
          </div>
        </div>
      </section>

      <!-- 운동 기록 탭 -->
      <section id="records" class="tab-content">
        <div class="section-header">
          <h2>운동 기록</h2>
          <button class="btn btn-primary" onclick="showAddRecordModal()">기록 추가</button>
        </div>

        <div class="student-selector" id="recordStudentSelector" style="display: none;">
          <label for="recordSelectedStudent">학생 선택:</label>
          <select id="recordSelectedStudent" onchange="loadRecords()">
            <option value="">전체 명렬표</option>
          </select>
        </div>

        <table class="data-table">
          <thead id="recordsTableHead">
            <tr>
              <th>날짜</th>
              <th>걸음 수</th>
              <th>운동 시간 (분)</th>
              <th>칼로리</th>
              <th>거리 (km)</th>
              <th>메모</th>
              <th>작업</th>
            </tr>
          </thead>
          <tbody id="recordsTableBody">
            <tr>
              <td colspan="7" class="text-center">기록이 없습니다</td>
            </tr>
          </tbody>
        </table>
      </section>

      <!-- 신체 기록 탭 -->
      <section id="physical" class="tab-content">
        <div class="section-header">
          <h2>신체 기록</h2>
          <button class="btn btn-primary" onclick="showAddPhysicalModal()">기록 추가</button>
        </div>

        <div class="student-selector" id="physicalStudentSelector" style="display: none;">
          <label for="physicalSelectedStudent">학생 선택:</label>
          <select id="physicalSelectedStudent" onchange="loadPhysicalRecords()">
            <option value="">학생을 선택하세요</option>
          </select>
        </div>

        <table class="data-table">
          <thead>
            <tr>
              <th>날짜</th>
              <th>키 (cm)</th>
              <th>몸무게 (kg)</th>
              <th>BMI</th>
              <th>메모</th>
              <th>작업</th>
            </tr>
          </thead>
          <tbody id="physicalRecordsTableBody">
            <tr>
              <td colspan="6" class="text-center">기록이 없습니다</td>
            </tr>
          </tbody>
        </table>
      </section>

      <!-- 획득 뱃지 탭 -->
      <section id="badges" class="tab-content">
        <div class="section-header">
          <h2>획득 뱃지</h2>
          <button class="btn btn-primary" id="toggleLeaderboardBtn" onclick="toggleLeaderboard()">
            🏆 리더보드 보기
          </button>
        </div>

        <!-- 리더보드 뷰 -->
        <div id="leaderboardView" style="display: none;">
          <div style="text-align: center; padding: 10px 0; color: #666; font-size: 14px; background: #f9f9f9; border-radius: 5px; margin-bottom: 15px;">
            📅 <strong>최근 7일</strong> 기준 - 매일 자동으로 갱신됩니다
          </div>
          <div class="leaderboard-tabs">
            <button class="leaderboard-tab-btn active" data-category="total" onclick="switchLeaderboardCategory('total')">종합</button>
            <button class="leaderboard-tab-btn" data-category="badges" onclick="switchLeaderboardCategory('badges')">뱃지</button>
            <button class="leaderboard-tab-btn" data-category="steps" onclick="switchLeaderboardCategory('steps')">걸음수</button>
            <button class="leaderboard-tab-btn" data-category="minutes" onclick="switchLeaderboardCategory('minutes')">운동시간</button>
            <button class="leaderboard-tab-btn" data-category="calories" onclick="switchLeaderboardCategory('calories')">칼로리</button>
            <button class="leaderboard-tab-btn" data-category="distance" onclick="switchLeaderboardCategory('distance')">거리</button>
          </div>

          <div class="leaderboard-content" id="leaderboardContent">
            <table class="data-table">
              <thead>
                <tr>
                  <th>순위</th>
                  <th>이름</th>
                  <th>반</th>
                  <th id="leaderboardValueHeader">총점</th>
                </tr>
              </thead>
              <tbody id="leaderboardTableBody">
                <tr>
                  <td colspan="4" class="text-center">데이터를 불러오는 중...</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- 학생용: 다른 학생 선택 -->
        <div class="student-selector" id="badgeStudentSelector" style="display: none;">
          <label for="badgeSelectedStudent">학생 선택:</label>
          <select id="badgeSelectedStudent" onchange="loadBadges()">
            <option value="">학생을 선택하세요</option>
          </select>
        </div>

        <!-- 교사용: 모든 학생 뱃지 현황 -->
        <div id="badgeSummaryView" style="display: none;">
          <h3>학생별 뱃지 획득 현황</h3>
          <table class="data-table">
            <thead>
              <tr>
                <th>이름</th>
                <th>반</th>
                <th>획득 뱃지 수</th>
                <th>뱃지</th>
              </tr>
            </thead>
            <tbody id="badgeSummaryTableBody">
              <tr>
                <td colspan="4" class="text-center">데이터를 불러오는 중...</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- 개별 학생 뱃지 상세 -->
        <div id="badgeDetailView">
          <div class="badge-stats" id="badgeStats">
            <div class="stat-card">
              <h3>획득한 뱃지</h3>
              <p class="stat-value" id="earnedBadges">-</p>
            </div>
            <div class="stat-card">
              <h3>전체 뱃지</h3>
              <p class="stat-value" id="totalBadgesCount">-</p>
            </div>
            <div class="stat-card">
              <h3>달성률</h3>
              <p class="stat-value" id="badgeCompletion">-</p>
            </div>
          </div>

          <h3>뱃지 목록</h3>
          <div class="badge-grid" id="badgeGrid">
            <p class="text-center">뱃지 정보를 불러오는 중...</p>
          </div>
        </div>
      </section>

      <!-- 런런톡 탭 -->
      <section id="board" class="tab-content">
        <div class="section-header">
          <h2>런런톡</h2>
          <button class="btn btn-primary" onclick="showCreatePostModal()">글쓰기</button>
        </div>

        <div class="board-container">
          <div class="posts-list" id="postsList">
            <p class="text-center">게시글을 불러오는 중...</p>
          </div>
        </div>
      </section>

      <!-- 학생 관리 탭 -->
      <section id="students" class="tab-content">
        <h2>학생 목록</h2>
        <table class="data-table">
          <thead id="studentsTableHead">
            <tr>
              <th>이름</th>
              <th>반</th>
              <th>학년</th>
              <th>아이디</th>
            </tr>
          </thead>
          <tbody id="studentsTableBody">
            <tr>
              <td colspan="4" class="text-center">학생이 없습니다</td>
            </tr>
          </tbody>
        </table>
      </section>
    </main>
  </div>

  <!-- 기록 추가 모달 -->
  <div id="addRecordModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeAddRecordModal()">&times;</span>
      <h2>운동 기록 추가</h2>
      <form id="addRecordForm">
        <div class="form-group">
          <label for="recordDate">날짜</label>
          <input type="date" id="recordDate" name="date" required>
        </div>
        <div class="form-group">
          <label for="recordSteps">걸음 수</label>
          <input type="number" id="recordSteps" name="steps" min="0" value="0" required>
        </div>
        <div class="form-group">
          <label for="recordMinutes">운동 시간 (분)</label>
          <input type="number" id="recordMinutes" name="exercise_minutes" min="0" value="0" required>
        </div>
        <div class="form-group">
          <label for="recordCalories">칼로리</label>
          <input type="number" id="recordCalories" name="calories" min="0" step="0.1" value="0" required>
        </div>
        <div class="form-group">
          <label for="recordDistance">거리 (km)</label>
          <input type="number" id="recordDistance" name="distance" min="0" step="0.01" value="0" required>
        </div>
        <div class="form-group">
          <label for="recordNotes">메모</label>
          <textarea id="recordNotes" name="notes" rows="3"></textarea>
        </div>
        <button type="submit" class="btn btn-primary">저장</button>
      </form>
    </div>
  </div>

  <!-- 신체 기록 추가 모달 -->
  <div id="addPhysicalModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeAddPhysicalModal()">&times;</span>
      <h2>신체 기록 추가</h2>
      <form id="addPhysicalForm">
        <div class="form-group">
          <label for="physicalDate">날짜</label>
          <input type="date" id="physicalDate" name="date" required>
        </div>
        <div class="form-group">
          <label for="physicalHeight">키 (cm)</label>
          <input type="number" id="physicalHeight" name="height" min="0" step="0.1" placeholder="예: 150.5" required>
        </div>
        <div class="form-group">
          <label for="physicalWeight">몸무게 (kg)</label>
          <input type="number" id="physicalWeight" name="weight" min="0" step="0.1" placeholder="예: 45.3" required>
        </div>
        <div class="form-group">
          <label for="physicalNotes">메모</label>
          <textarea id="physicalNotes" name="notes" rows="3" placeholder="예: 건강검진, 체육시간 측정 등"></textarea>
        </div>
        <button type="submit" class="btn btn-primary">저장</button>
      </form>
    </div>
  </div>

  <!-- 회원가입 모달 -->
  <div id="signupModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeSignupModal()">&times;</span>
      <h2>학생 회원가입</h2>
      <form id="signupForm">
        <div class="form-group">
          <label for="signupSchool">학교 이름 <span class="required">*</span></label>
          <input type="text" id="signupSchool" name="school" placeholder="예: 서울초등학교" required>
          <small>OO초등학교 형식으로 입력하세요</small>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="signupGrade">학년 <span class="required">*</span></label>
            <select id="signupGrade" name="grade" required>
              <option value="">선택</option>
              <option value="1">1학년</option>
              <option value="2">2학년</option>
              <option value="3">3학년</option>
              <option value="4">4학년</option>
              <option value="5">5학년</option>
              <option value="6">6학년</option>
            </select>
          </div>

          <div class="form-group">
            <label for="signupClass">반 <span class="required">*</span></label>
            <input type="number" id="signupClass" name="class" min="1" max="20" placeholder="예: 1" required>
          </div>

          <div class="form-group">
            <label for="signupNumber">번호 <span class="required">*</span></label>
            <input type="number" id="signupNumber" name="number" min="1" max="40" placeholder="예: 5" required>
          </div>
        </div>

        <div class="form-group">
          <label for="signupName">이름 <span class="required">*</span></label>
          <input type="text" id="signupName" name="name" placeholder="예: 홍길동" required>
        </div>

        <div class="form-group">
          <label for="signupPassword">비밀번호 <span class="required">*</span></label>
          <input type="password" id="signupPassword" name="password" minlength="4" placeholder="최소 4자 이상" required>
        </div>

        <div class="form-group">
          <label for="signupPasswordConfirm">비밀번호 확인 <span class="required">*</span></label>
          <input type="password" id="signupPasswordConfirm" name="passwordConfirm" minlength="4" placeholder="비밀번호를 다시 입력하세요" required>
        </div>

        <div class="form-group">
          <label for="signupEmail">이메일 (선택)</label>
          <input type="email" id="signupEmail" name="email" placeholder="예: student@email.com">
        </div>

        <div class="privacy-agreement">
          <h3>개인정보 수집 및 이용 동의</h3>
          <div class="privacy-content">
            <p><strong>1. 수집하는 개인정보 항목</strong></p>
            <p>학교명, 학년, 반, 번호, 이름, 이메일(선택), 비밀번호</p>

            <p><strong>2. 개인정보의 수집 및 이용 목적</strong></p>
            <p>- 학생 운동 활동 기록 관리<br>
            - 스마트폰 및 웨어러블 기기로부터 걸음 수, 운동 시간, 칼로리 소모량, 이동 거리 등 운동 정보 수집 및 분석<br>
            - 운동 목표 설정 및 달성도 관리<br>
            - 뱃지 및 리워드 제공<br>
            - 학생 건강 증진 및 운동 습관 형성 지원</p>

            <p><strong>3. 개인정보의 보유 및 이용 기간</strong></p>
            <p>회원 탈퇴 시까지 보유하며, 탈퇴 즉시 모든 정보가 삭제됩니다.</p>

            <p><strong>4. 동의 거부 권리 및 불이익</strong></p>
            <p>개인정보 수집 및 이용에 대한 동의를 거부할 수 있으나, 동의하지 않을 경우 서비스 이용이 제한됩니다.</p>
          </div>

          <label class="checkbox-label">
            <input type="checkbox" id="privacyAgree" name="privacyAgree" required>
            <span>위 개인정보 수집 및 이용에 동의합니다 (필수)</span>
          </label>
        </div>

        <button type="submit" class="btn btn-primary">가입하기</button>
      </form>
    </div>
  </div>

  <!-- 학생 정보 수정 모달 -->
  <div id="editStudentModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeEditStudentModal()">&times;</span>
      <h2>학생 정보 수정</h2>
      <form id="editStudentForm">
        <input type="hidden" id="editStudentId" name="studentId">

        <div class="form-group">
          <label for="editStudentUsername">아이디</label>
          <input type="text" id="editStudentUsername" disabled>
          <small>아이디는 수정할 수 없습니다</small>
        </div>

        <div class="form-group">
          <label for="editStudentName">이름 <span class="required">*</span></label>
          <input type="text" id="editStudentName" name="name" required>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="editStudentGrade">학년 <span class="required">*</span></label>
            <select id="editStudentGrade" name="grade" required>
              <option value="1">1학년</option>
              <option value="2">2학년</option>
              <option value="3">3학년</option>
              <option value="4">4학년</option>
              <option value="5">5학년</option>
              <option value="6">6학년</option>
            </select>
          </div>

          <div class="form-group">
            <label for="editStudentClass">반 <span class="required">*</span></label>
            <input type="number" id="editStudentClass" name="class" min="1" max="20" required>
          </div>
        </div>

        <div class="form-group">
          <label for="editStudentEmail">이메일</label>
          <input type="email" id="editStudentEmail" name="email">
        </div>

        <div class="form-group">
          <label for="editStudentPhone">전화번호</label>
          <input type="tel" id="editStudentPhone" name="phone">
        </div>

        <button type="submit" class="btn btn-primary">저장</button>
      </form>
    </div>
  </div>

  <!-- 교사 회원가입 모달 -->
  <div id="teacherSignupModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeTeacherSignupModal()">&times;</span>
      <h2>교사 회원가입</h2>
      <form id="teacherSignupForm">
        <div class="form-group">
          <label for="teacherSignupSchool">학교 이름 <span class="required">*</span></label>
          <input type="text" id="teacherSignupSchool" name="school" placeholder="예: 서울초등학교" required>
          <small>OO초등학교 형식으로 입력하세요</small>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="teacherSignupGrade">담당 학년 <span class="required">*</span></label>
            <select id="teacherSignupGrade" name="grade" required>
              <option value="">선택</option>
              <option value="1">1학년</option>
              <option value="2">2학년</option>
              <option value="3">3학년</option>
              <option value="4">4학년</option>
              <option value="5">5학년</option>
              <option value="6">6학년</option>
            </select>
          </div>

          <div class="form-group">
            <label for="teacherSignupClass">담임 반 <span class="required">*</span></label>
            <input type="number" id="teacherSignupClass" name="class" min="1" max="20" placeholder="예: 1" required>
          </div>
        </div>

        <div class="form-group">
          <label for="teacherSignupName">이름 <span class="required">*</span></label>
          <input type="text" id="teacherSignupName" name="name" placeholder="예: 홍길동" required>
        </div>

        <div class="form-group">
          <label for="teacherSignupPassword">비밀번호 <span class="required">*</span></label>
          <input type="password" id="teacherSignupPassword" name="password" minlength="4" placeholder="최소 4자 이상" required>
        </div>

        <div class="form-group">
          <label for="teacherSignupPasswordConfirm">비밀번호 확인 <span class="required">*</span></label>
          <input type="password" id="teacherSignupPasswordConfirm" name="passwordConfirm" minlength="4" placeholder="비밀번호를 다시 입력하세요" required>
        </div>

        <div class="form-group">
          <label for="teacherSignupEmail">이메일 (선택)</label>
          <input type="email" id="teacherSignupEmail" name="email" placeholder="예: teacher@email.com">
        </div>

        <div class="privacy-agreement">
          <h3>개인정보 수집 및 이용 동의</h3>
          <div class="privacy-content">
            <p><strong>1. 수집하는 개인정보 항목</strong></p>
            <p>학교명, 담당 학년, 담임 반, 이름, 이메일(선택), 비밀번호</p>

            <p><strong>2. 개인정보의 수집 및 이용 목적</strong></p>
            <p>- 교사 계정 관리<br>
            - 담임 반 학생 운동 활동 기록 조회 및 관리<br>
            - 학생 건강 증진 및 운동 습관 형성 지원</p>

            <p><strong>3. 개인정보의 보유 및 이용 기간</strong></p>
            <p>회원 탈퇴 시까지 보유하며, 탈퇴 즉시 모든 정보가 삭제됩니다.</p>

            <p><strong>4. 동의 거부 권리 및 불이익</strong></p>
            <p>개인정보 수집 및 이용에 대한 동의를 거부할 수 있으나, 동의하지 않을 경우 서비스 이용이 제한됩니다.</p>
          </div>

          <label class="checkbox-label">
            <input type="checkbox" id="teacherPrivacyAgree" name="privacyAgree" required>
            <span>위 개인정보 수집 및 이용에 동의합니다 (필수)</span>
          </label>
        </div>

        <button type="submit" class="btn btn-primary">가입하기</button>
      </form>
    </div>
  </div>

  <!-- 학부모 회원가입 모달 -->
  <div id="parentSignupModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeParentSignupModal()">&times;</span>
      <h2>학부모 회원가입</h2>
      <form id="parentSignupForm">
        <div class="form-group">
          <label for="parentSignupName">학부모 이름 <span class="required">*</span></label>
          <input type="text" id="parentSignupName" name="name" placeholder="예: 홍길동" required>
        </div>

        <div class="form-group">
          <label for="parentSignupPassword">비밀번호 <span class="required">*</span></label>
          <input type="password" id="parentSignupPassword" name="password" minlength="4" placeholder="최소 4자 이상" required>
        </div>

        <div class="form-group">
          <label for="parentSignupPasswordConfirm">비밀번호 확인 <span class="required">*</span></label>
          <input type="password" id="parentSignupPasswordConfirm" name="passwordConfirm" minlength="4" placeholder="비밀번호를 다시 입력하세요" required>
        </div>

        <div class="form-group">
          <label for="parentSignupEmail">이메일 (선택)</label>
          <input type="email" id="parentSignupEmail" name="email" placeholder="예: parent@email.com">
        </div>

        <h3 style="margin-top: 20px; margin-bottom: 10px; font-size: 18px; color: #333;">자녀 정보</h3>

        <div class="form-group">
          <label for="parentSignupChildName">자녀 이름 <span class="required">*</span></label>
          <input type="text" id="parentSignupChildName" name="childName" placeholder="예: 홍길순" required>
        </div>

        <div class="form-group">
          <label for="parentSignupChildSchool">자녀 학교 이름 <span class="required">*</span></label>
          <input type="text" id="parentSignupChildSchool" name="childSchool" placeholder="예: 서울초등학교" required>
          <small>OO초등학교 형식으로 입력하세요</small>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="parentSignupChildGrade">자녀 학년 <span class="required">*</span></label>
            <select id="parentSignupChildGrade" name="childGrade" required>
              <option value="">선택</option>
              <option value="1">1학년</option>
              <option value="2">2학년</option>
              <option value="3">3학년</option>
              <option value="4">4학년</option>
              <option value="5">5학년</option>
              <option value="6">6학년</option>
            </select>
          </div>

          <div class="form-group">
            <label for="parentSignupChildClass">자녀 반 <span class="required">*</span></label>
            <input type="number" id="parentSignupChildClass" name="childClass" min="1" max="20" placeholder="예: 1" required>
          </div>
        </div>

        <div class="privacy-agreement">
          <h3>개인정보 수집 및 이용 동의</h3>
          <div class="privacy-content">
            <p><strong>1. 수집하는 개인정보 항목</strong></p>
            <p>학부모 이름, 이메일(선택), 비밀번호, 자녀 이름, 자녀 학교, 자녀 학년, 자녀 반</p>

            <p><strong>2. 개인정보의 수집 및 이용 목적</strong></p>
            <p>- 학부모 계정 관리<br>
            - 자녀 운동 활동 기록 조회<br>
            - 자녀 건강 증진 및 운동 습관 형성 지원</p>

            <p><strong>3. 개인정보의 보유 및 이용 기간</strong></p>
            <p>회원 탈퇴 시까지 보유하며, 탈퇴 즉시 모든 정보가 삭제됩니다.</p>

            <p><strong>4. 동의 거부 권리 및 불이익</strong></p>
            <p>개인정보 수집 및 이용에 대한 동의를 거부할 수 있으나, 동의하지 않을 경우 서비스 이용이 제한됩니다.</p>
          </div>

          <label class="checkbox-label">
            <input type="checkbox" id="parentPrivacyAgree" name="privacyAgree" required>
            <span>위 개인정보 수집 및 이용에 동의합니다 (필수)</span>
          </label>
        </div>

        <div class="privacy-agreement" style="margin-top: 15px;">
          <h3>자녀 운동정보 수집 및 이용 동의</h3>
          <div class="privacy-content">
            <p>학부모 계정으로 자녀의 다음 운동정보를 조회할 수 있습니다:</p>
            <p>- 스마트폰 및 웨어러블 기기로부터 수집된 걸음 수, 운동 시간, 칼로리 소모량, 이동 거리<br>
            - 운동 목표 달성도 및 뱃지 획득 현황<br>
            - 운동 기록 및 통계</p>
          </div>

          <label class="checkbox-label">
            <input type="checkbox" id="parentChildDataAgree" name="childDataAgree" required>
            <span>자녀의 운동정보 수집 및 조회에 동의합니다 (필수)</span>
          </label>
        </div>

        <button type="submit" class="btn btn-primary">가입하기</button>
      </form>
    </div>
  </div>

  <!-- 게시글 작성 모달 -->
  <div id="createPostModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeCreatePostModal()">&times;</span>
      <h2>게시글 작성</h2>
      <form id="createPostForm">
        <div class="form-group">
          <label for="postTitle">제목 <span class="required">*</span></label>
          <input type="text" id="postTitle" name="title" placeholder="제목을 입력하세요" required>
        </div>
        <div class="form-group">
          <label for="postContent">내용 <span class="required">*</span></label>
          <textarea id="postContent" name="content" rows="10" placeholder="내용을 입력하세요" required></textarea>
        </div>
        <button type="submit" class="btn btn-primary">작성하기</button>
      </form>
    </div>
  </div>

  <!-- 게시글 상세 모달 -->
  <div id="postDetailModal" class="modal">
    <div class="modal-content modal-large">
      <span class="close" onclick="closePostDetailModal()">&times;</span>
      <div id="postDetailContent">
        <div class="post-detail-header">
          <h2 id="detailPostTitle"></h2>
          <div class="post-meta">
            <span id="detailPostAuthor"></span>
            <span id="detailPostDate"></span>
          </div>
        </div>
        <div class="post-detail-body">
          <p id="detailPostContent"></p>
        </div>
        <div class="post-actions" id="postActions" style="display: none;">
          <button class="btn btn-secondary btn-sm" onclick="editPost()">수정</button>
          <button class="btn btn-danger btn-sm" onclick="deletePost()">삭제</button>
        </div>

        <div class="comments-section">
          <h3>댓글 <span id="commentCount">0</span></h3>
          <div class="comment-form">
            <textarea id="commentContent" placeholder="댓글을 입력하세요" rows="3"></textarea>
            <button class="btn btn-primary btn-sm" onclick="addComment()">댓글 작성</button>
          </div>
          <div class="comments-list" id="commentsList">
            <p class="text-center">댓글이 없습니다</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 게시글 수정 모달 -->
  <div id="editPostModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeEditPostModal()">&times;</span>
      <h2>게시글 수정</h2>
      <form id="editPostForm">
        <input type="hidden" id="editPostId">
        <div class="form-group">
          <label for="editPostTitle">제목 <span class="required">*</span></label>
          <input type="text" id="editPostTitle" name="title" required>
        </div>
        <div class="form-group">
          <label for="editPostContent">내용 <span class="required">*</span></label>
          <textarea id="editPostContent" name="content" rows="10" required></textarea>
        </div>
        <button type="submit" class="btn btn-primary">수정하기</button>
      </form>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
